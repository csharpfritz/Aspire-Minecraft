# v0.1.0 Demo Script

> **Duration:** ~10 minutes (expandable to 20 for deep-dive)
> **Purpose:** Walk through the Aspire.Hosting.Minecraft integration live, showing the "happy path" and then breaking things to show reactive features.
> **Audience:** .NET developers at a meetup, conference, or stream

---

## Prerequisites

Before the demo, ensure you have:

- [ ] .NET 10 SDK installed
- [ ] Docker Desktop running (with at least 4 GB RAM allocated)
- [ ] Minecraft Java Edition installed and logged in
- [ ] The repo cloned: `git clone https://github.com/csharpfritz/Aspire-Minecraft`
- [ ] A code editor open to `samples/MinecraftAspireDemo/MinecraftAspireDemo.AppHost/Program.cs`
- [ ] Browser ready for Aspire dashboard and BlueMap
- [ ] Screen recording running (if capturing media)

**Pre-warm tip:** Run `dotnet build` and `docker pull itzg/minecraft-server:latest` beforehand. The Minecraft server image is ~1 GB and the first server boot takes 60–90 seconds to generate the world.

---

## Act 1: "It's Just Aspire" (3 minutes)

### Step 1 — Show the Code

Open `samples/MinecraftAspireDemo/MinecraftAspireDemo.AppHost/Program.cs` and walk through it:

```csharp
var minecraft = builder.AddMinecraftServer("minecraft", gamePort: 25565, rconPort: 25575)
    .WithBlueMap(port: 8100)
    .WithOpenTelemetry()
    .WithAspireWorldDisplay<Projects.Aspire_Hosting_Minecraft_Worker>()
    .WithMonitoredResource(api)
    .WithMonitoredResource(web)
    .WithMonitoredResource(redis)
    .WithMonitoredResource(pg);
```

**Talking points:**
- "This is a normal Aspire AppHost. Redis, Postgres, an API, a web frontend."
- "And then there's this: `AddMinecraftServer()`. One line to add a Minecraft server to your distributed app."
- "`.WithBlueMap()` gives us a 3D web map. `.WithOpenTelemetry()` gives us JVM metrics. `.WithAspireWorldDisplay()` builds our infrastructure inside the Minecraft world."
- "Each `.WithMonitoredResource()` says: watch this service and show me its health in-game."

### Step 2 — Start the Application

```shell
cd samples/MinecraftAspireDemo/MinecraftAspireDemo.AppHost
dotnet run
```

**While it boots (~60 seconds):**
- Show the Aspire dashboard opening automatically
- Point out the Minecraft resource appearing with "Starting" status
- Show the worker service as a child of the Minecraft resource
- "Notice the endpoints: game port, RCON, and BlueMap — all visible in the dashboard."

### Step 3 — Show the Dashboard

Once all resources show "Running":
- Click through each resource: API, Web, Redis, Postgres, Minecraft
- Show the Minecraft resource's endpoints (game, RCON, BlueMap)
- Open the BlueMap endpoint (`http://localhost:8100`) — "A full 3D map of our Minecraft world, right in the browser."

---

## Act 2: "Welcome to Your Infrastructure" (3 minutes)

### Step 4 — Connect to Minecraft

1. Open Minecraft Java Edition
2. Multiplayer → Add Server → `localhost:25565`
3. Join the server

**Talking points:**
- "We're connecting to a real Minecraft server that Aspire started for us in Docker."
- "The worker has already been busy building our infrastructure."

### Step 5 — Tour the In-World Display

Fly or walk to the structures near spawn:

1. **Structures** — "Each of these emerald block cubes represents one of our Aspire resources. The API, the web frontend, Redis, Postgres."
2. **Holograms** — "Floating above each one is a hologram showing the resource name and current health status."
3. **Scoreboard** — "On the right sidebar, a scoreboard lists every resource and its status — green means healthy."
4. **Boss Bar** — "At the top of the screen, that green boss bar says 'System Health: 5/5 Healthy'. It's a persistent system-wide health meter."

### Step 6 — Show Metrics

Switch to the Aspire dashboard metrics tab for the Minecraft resource:

- "JVM metrics — heap memory, garbage collection, thread count — from the OpenTelemetry Java agent running inside the Minecraft server container."
- "And custom game metrics — TPS (ticks per second), MSPT (milliseconds per tick), player count — polled via RCON by our worker."
- "All flowing into the same Aspire dashboard as your .NET service metrics."

---

## Act 3: "Break Something" (3 minutes)

> This is the dramatic peak of the demo. Build anticipation.

### Step 7 — Stop the API Service

In the Aspire dashboard:
1. Find the `api` resource
2. Click **Stop**

**Talk through what's about to happen:**
- "I just killed the API. Let's switch to Minecraft and watch."

### Step 8 — Watch the World React

Switch to the Minecraft client and observe (in this order):

1. **Title Alert** — A full-screen title appears: "⚠ api — Service is unhealthy!" — "You can't miss that."
2. **Boss Bar** — Changes from green to yellow: "System Health: 4/5 Healthy"
3. **Weather** — Sky darkens, rain starts falling — "The weather just changed because our system is degraded."
4. **Structure** — The API's cube changes from emerald blocks to redstone blocks — "Even the building material tells you something is wrong."
5. **Particles** — Smoke or flame particles at the unhealthy structure — "Angry particles. Very scientific."
6. **Sound** — A wither-like sound plays — "Audio feedback too."
7. **Scoreboard** — The API entry turns red

**Key line:** "One service went down, and six different feedback channels told you about it — inside a video game."

### Step 9 — Make It Worse (Optional)

Stop Redis too:
- Boss bar turns red: "System Health: 3/5 Healthy"
- Weather escalates to thunderstorm with lightning
- Another title alert fires
- A second structure turns to redstone

### Step 10 — Recovery

Restart the API and Redis from the Aspire dashboard:
1. Start `cache` (Redis)
2. Start `api`

Watch the recovery sequence:
- Title alert: "✅ api is back!"
- Boss bar climbs back to green
- Weather clears — sun comes out
- Structures return to emerald blocks
- Happy particles resume
- Recovery chime plays

**Key line:** "The sun literally came out because your services recovered. Tell me that's not the best dashboard you've ever used."

---

## Act 4: Wrap-Up (1 minute)

### Step 11 — BlueMap Fly-Through

Switch to the BlueMap browser tab:
- Orbit around the structures
- "This is a live 3D map of everything the worker built. You could share this URL with your team."

### Step 12 — Call to Action

```shell
dotnet add package Aspire.Hosting.Minecraft --version 0.1.0
```

- "One NuGet package. MIT licensed. Works with any Aspire app."
- "Star the repo, try the demo, and open an issue if you have ideas — we're building fireworks for all-green recovery, guardian mobs that chase unhealthy services, and a full resource village in the next two sprints."

---

## Troubleshooting During Demo

| Issue | Fix |
|---|---|
| Minecraft server won't start | Check Docker Desktop is running and has enough memory. Run `docker logs` on the container. |
| Can't connect to server | Wait 60–90 seconds for world generation. Check port 25565 isn't already in use. |
| No structures visible | Fly around spawn (`/tp @s 0 80 0`). The worker takes ~30 seconds to build after connecting. |
| BlueMap shows empty map | BlueMap needs a minute to render the first time. Refresh the browser. |
| Weather doesn't change | Ensure Sprint 1 weather feature is implemented and the worker detects the health change. Check worker logs in Aspire dashboard. |
| Boss bar missing | Ensure Sprint 1 boss bar feature is implemented. Check that a player is online (boss bars require a connected player). |
| Metrics not showing | Wait 2–3 minutes for OTEL data to accumulate. Check that the OTLP endpoint is reachable from the Docker container. |

---

## Timing Guide

| Segment | Duration | Notes |
|---|---|---|
| Act 1: Show code + start app | 3 min | Fill boot time with dashboard walkthrough |
| Act 2: Minecraft tour | 3 min | Fly, don't walk — spectator mode is faster |
| Act 3: Break & recover | 3 min | This is the climax — don't rush it |
| Act 4: Wrap-up | 1 min | End on BlueMap + CTA |
| **Total** | **~10 min** | |

> **Extended version (20 min):** Add a live-coding segment in Act 1 where you add `WithMonitoredResource()` for a new service, restart, and watch it appear in-world. Also show the structured OTEL logs in the dashboard for the player message audit trail.
