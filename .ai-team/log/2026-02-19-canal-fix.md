# 2026-02-19: Canal System Fix

**Requested by:** Jeffrey T. Fritz

## Work Completed

Rocket fixed three critical canal system issues identified in production:

1. **Branch-to-trunk disconnection** — Added `OpenBranchJunctionsAsync` post-pass to carve openings at branch canal junctions after trunk construction, enabling proper connectivity without requiring trunk Z-range refactoring.

2. **Detour Z-drift** — Branch canals now reset `currentZ` to entrance Z after detouring around blocking buildings, ensuring consistent junction positioning at the trunk.

3. **Bridge elevation** — Connector bridges raised to `SurfaceY + 1` with oak fence railings at `SurfaceY + 2` for proper clearance and aesthetics.

## Verification

Build verified clean. No test failures. Canal routing now produces connected networks without Z-level inconsistencies.

## Decisions

- Post-pass junction carving pattern (vs. build-order refactoring)
- Detour Z-reset behavior for branch canals
- Bridge elevation standard (SurfaceY + 1)

All documented in decisions.md.
